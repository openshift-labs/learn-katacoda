## Create Data Grid Cluster

With the Data Grid Operator installed, we can now create new Data Grid caches and services simply by creating custom resources.

Let's create our first Data Grid Cache using the OpenShift console. To get a feel for how the web console
works, click this link to open the [Overview in the OpenShift Console](https://console-openshift-console-[[HOST_SUBDOMAIN]]-443-[[KATACODA_HOST]].environments.katacoda.com/topology/ns/dgdemo/graph)

The first screen you will see is the authentication screen. Enter your username and password and
then log in:

* Username: `admin`
* Password: `admin`

![Web Console Login](/openshift/assets/middleware/dg/login.png)

You'll see the operator pod deployed:

![Operator](/openshift/assets/middleware/dg/opover.png)

Select the _Developer View_ using the selector on the left and click **Skip Tour** to skip the new user introduction:

![Operator](/openshift/assets/middleware/dg/dgdev.png)

### Create Data Grid Cache service

With the Operator installed, we can now start creating instances of Data Grid.

To do so, on the [Developer View](https://console-openshift-console-[[HOST_SUBDOMAIN]]-443-[[KATACODA_HOST]].environments.katacoda.com/topology/ns/dgdemo/graph), click **Add** on the left, and select **Operator Backed**. This will allow you to create objects that installed Operators are looking for:

![Operator](/openshift/assets/middleware/dg/dgadd.png)

In this case, find and click on the **Infinispan Cluster** element:

![Operator](/openshift/assets/middleware/dg/opcatalog.png)

And click **Create**.

![Operator](/openshift/assets/middleware/dg/opcreate.png)

Here you can configure your new Data Grid cluster (note we have not created any Caches yet within the cluster). There are [many options described in the docs](https://access.redhat.com/documentation/en-us/red_hat_data_grid/8.2/html/running_data_grid_on_openshift/index) for security, users, and others. We'll keep it simple for this demo.

Change the name to `datagrid-service` and set the number of _replicas_ to `2`:

![Operator](/openshift/assets/middleware/dg/opconfig.png)

Finally, scroll to the bottom and click **Create**. You'll now see your new Data Grid cluster and its 2 replicas spin up. Click the following command to wait for it to finish:

`oc rollout status -w statefulset/datagrid-service`{{execute}}

> **NOTE**: It may take a minute or so to fully spin up, as the container images must be downloaded the first time.

Now click on the box for `datagrid-service` to see its details:

![Operator](/openshift/assets/middleware/dg/dgdeploy.png)

Here you can see the two replicas running in 2 separate pods.

## Access Data Grid Web Console

Data Grid has a built in single-port endpoint for all network access, including an administrative console for displaying cache configuration, statistics, and creating/changing data in the grid. The console is accessed over the same networking port as the grid itself. To get to it in this environment, we'll need to create a specialized Route to it. Click the following command to create this Route:

```
oc apply -f - << EOF
kind: Route
apiVersion: route.openshift.io/v1
metadata:
  name: my-dg
spec:
  to:
    kind: Service
    name: datagrid-service
    weight: 100
  port:
    targetPort: infinispan
  tls:
    termination: reencrypt
    insecureEdgeTerminationPolicy: Allow
  wildcardPolicy: None
EOF
```{{execute}}

You'll also need to get the default username/password to use when logging into the console. Retrieve them by clicking this command:

`oc get secret datagrid-service-generated-secret -o jsonpath="{.data.identities\.yaml}" | base64 --decode`{{execute}}

> **NOTE**: These are default autogenerated credentials that can be disabled or reconfigured when for production use.

You should now be able to click here to [connect to the Data Grid Console](https://my-dg-dgdemo.[[HOST_SUBDOMAIN]]-80-[[KATACODA_HOST]].environments.katacoda.com).

> **NOTE**: You may need to accept browser warnings about self-signed insecure connections. We are not using real security certificates here for this demo!

![Operator](/openshift/assets/middleware/dg/consolewelcome.png)

Click **Open The Console** and login using the above credentials retrieved with the `oc get secret` command. You'll land on the home screen:

![Operator](/openshift/assets/middleware/dg/consolehome.png)

With the console you can create caches, perform adminstrative operations, and monitor your Data Grid clusters. We'll revisit this later to see effects of our exercises.

Let's save the password to a shell environment variable that we'll use later. Click this command to save it to the `PASSWORD` environment variable:

`export PASSWORD=$(oc get secret datagrid-service-generated-secret -o jsonpath="{.data.identities\.yaml}" | base64 --decode | grep password | awk '{print $2}')`{{execute}}

**Congratulations** you now have Data Grid up and running, but we haven't created any actual usable caches yet. We'll do that in the next step.
